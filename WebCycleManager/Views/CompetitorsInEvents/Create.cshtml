@model Domain.Models.CompetitorsInEvent


<h1>Voeg deelnemers toe aan evenement</h1>
<hr />
<div class="row">
    <div class="col-md-12">
        <form asp-action="Create" asp-controller="CompetitorsInEvents" method="post" class="form-control" role="form">
            <div class="form-group">
                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-md-10 col-lg-14">
                        <label class="control-label">Filter op team</label>>
                        <select id="SelectTeamId" name="SelectTeamId"
                            class ="form-control" 
                            asp-items="@(new SelectList(@ViewBag.ListOfTeams, "TeamId", "TeamName"))">
                            <option value="0">Selecteer...</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="row-cols-md-auto">
                        <label class="control-label">Renners</label>
                        <select multiple="multiple" class="form-control" id="SelectCompetitorId" name="SelectCompetitorId" asp-for="CompetitorId" size="20"
                        asp-items="@(new SelectList(string.Empty, "CompetitorId", "CompetitorName"))"></select>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">
                        <button type="submit" class="link-dark" value="Bewaar" asp-route-eventId="@ViewBag.EventId">Bewaar</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<div>
    <a asp-controller="CompetitorsInEvents" asp-action="Index" asp-route-eventId="@ViewBag.EventId">Terug naar de lijst</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
<script src="~/lib/jquery/dist/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#SelectTeamId').change(function() {
            var url = '@Url.Content("~/")' + "CompetitorsInEvents/GetCompetitorForEvent";
            var ddlsource = "#SelectTeamId";
            $.getJSON(url, { TeamId: $(ddlsource).val() }, function(data) {
                var items = '';
                $("#SelectCompetitorId").empty();
                $.each(data, function(i, competitor) {
                    items += "<option value='" + competitor.value + "'>" +  competitor.text + "</option>";
                });
                $('#SelectCompetitorId').html(items);
            });
        });
    });
</script>